<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PC Parts Tracker - Best Deals on Computer Parts</title>
<style>
:root{color-scheme:dark;--bg-primary:#0a0e17;--bg-secondary:#0f172a;--bg-card:#1e293b;--accent:#3b82f6;--accent-hover:#2563eb;--text-primary:#f1f5f9;--text-secondary:#cbd5e1;--border:rgba(255,255,255,.08)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg-primary);color:var(--text-primary);line-height:1.6}
nav{background:var(--bg-secondary);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;backdrop-filter:blur(12px)}
.nav-container{max-width:1400px;margin:0 auto;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}
.logo{font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,#3b82f6 0%,#8b5cf6 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.nav-links{display:flex;gap:2rem;list-style:none}
.nav-links a{color:var(--text-secondary);text-decoration:none;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text-primary)}
.dropdown{position:relative}
.dropdown-toggle{background:none;border:none;color:var(--text-secondary);font-weight:500;font-size:1rem;cursor:pointer;padding:.5rem 1rem;transition:color .2s;display:flex;align-items:center;gap:.5rem}
.dropdown-toggle:hover{color:var(--text-primary)}
.dropdown-toggle::after{content:'â–¼';font-size:.7rem}
.dropdown-menu{position:absolute;top:100%;left:0;background:var(--bg-card);border:1px solid var(--border);border-radius:12px;margin-top:.5rem;min-width:200px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s;box-shadow:0 8px 24px rgba(0,0,0,.4)}
.dropdown.active .dropdown-menu{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown-menu a,.dropdown-menu button{display:block;width:100%;padding:.75rem 1rem;color:var(--text-secondary);text-decoration:none;transition:all .2s;border:none;background:none;text-align:left;cursor:pointer;font-size:1rem;font-weight:500}
.dropdown-menu a:hover,.dropdown-menu button:hover{background:var(--bg-secondary);color:var(--text-primary)}
.dropdown-menu a:first-child,.dropdown-menu button:first-child{border-radius:12px 12px 0 0}
.dropdown-menu a:last-child,.dropdown-menu button:last-child{border-radius:0 0 12px 12px}
.hero{max-width:1400px;margin:0 auto;padding:4rem 2rem;text-align:center}
.hero h1{font-size:3.5rem;font-weight:900;margin-bottom:1rem;background:linear-gradient(135deg,#fff 0%,#94a3b8 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{font-size:1.25rem;color:var(--text-secondary);margin-bottom:2rem;max-width:600px;margin-left:auto;margin-right:auto}
.cta-button{display:inline-block;padding:1rem 2rem;background:var(--accent);color:white;text-decoration:none;border-radius:12px;font-weight:600;font-size:1.1rem;transition:all .3s;box-shadow:0 4px 20px rgba(59,130,246,.3)}
.cta-button:hover{background:var(--accent-hover);transform:translateY(-2px);box-shadow:0 6px 30px rgba(59,130,246,.4)}
.featured-section{max-width:1400px;margin:4rem auto;padding:0 2rem}
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}
.section-header h2{font-size:2rem;font-weight:800}
.ai-badge{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:linear-gradient(135deg,rgba(139,92,246,.2) 0%,rgba(59,130,246,.2) 100%);border:1px solid rgba(139,92,246,.3);border-radius:999px;font-size:.875rem;font-weight:600}
.ai-badge::before{content:"âœ¨";font-size:1rem}
.deals-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}
.deal-card{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;overflow:hidden;transition:all .3s;position:relative}
.deal-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,.4);border-color:rgba(59,130,246,.3)}
.deal-badge{position:absolute;top:12px;right:12px;background:rgba(239,68,68,.9);color:white;padding:.25rem .75rem;border-radius:999px;font-size:.75rem;font-weight:700;z-index:10}
.deal-image{width:100%;aspect-ratio:16/10;background:var(--bg-secondary);object-fit:cover}
.deal-content{padding:1.25rem}
.deal-title{font-size:1rem;font-weight:600;margin-bottom:.5rem;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.deal-meta{display:flex;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap}
.deal-tag{font-size:.75rem;padding:.25rem .5rem;background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.25);border-radius:6px;color:#93c5fd}
.deal-price{font-size:1.75rem;font-weight:900;color:#10b981;margin-bottom:.75rem}
.deal-reason{font-size:.875rem;color:var(--text-secondary);margin-bottom:1rem;font-style:italic;line-height:1.5}
.deal-button{display:block;width:100%;padding:.75rem;background:var(--accent);color:white;text-align:center;text-decoration:none;border-radius:10px;font-weight:600;transition:all .2s}
.deal-button:hover{background:var(--accent-hover)}
.loading{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}
.spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}
@keyframes spin{to{transform:rotate(360deg)}}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1000;align-items:center;justify-content:center;padding:2rem}
.modal.active{display:flex}
.modal-content{background:var(--bg-card);border-radius:24px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;padding:2rem;position:relative;border:1px solid var(--border)}
.modal-close{position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--text-secondary);font-size:2rem;cursor:pointer;line-height:1;padding:.5rem}
.modal-close:hover{color:var(--text-primary)}
.builder-form{display:flex;flex-direction:column;gap:1.5rem;margin-top:2rem}
.form-group{display:flex;flex-direction:column;gap:.5rem}
.form-group label{font-weight:600;color:var(--text-primary)}
.form-group select,.form-group input{background:var(--bg-secondary);border:1px solid var(--border);border-radius:12px;padding:1rem;color:var(--text-primary);font-size:1rem}
.builder-button{background:linear-gradient(135deg,#8b5cf6 0%,#6366f1 100%);color:white;border:none;padding:1rem 2rem;border-radius:12px;font-weight:600;font-size:1.1rem;cursor:pointer;transition:all .3s;margin-top:1rem}
.builder-button:hover{transform:translateY(-2px);box-shadow:0 6px 30px rgba(139,92,246,.4)}
.builder-button:disabled{opacity:.5;cursor:not-allowed;transform:none}
.build-result{margin-top:2rem;display:none}
.build-result.active{display:block}
.build-part{background:var(--bg-secondary);border:1px solid var(--border);border-radius:12px;padding:1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}
.build-part-info h4{margin:0 0 .25rem 0;color:var(--text-primary)}
.build-part-info p{margin:0;color:var(--text-secondary);font-size:.875rem}
.build-part-price{font-size:1.25rem;font-weight:800;color:#10b981}
.build-total{background:linear-gradient(135deg,rgba(139,92,246,.2) 0%,rgba(59,130,246,.2) 100%);border:2px solid rgba(139,92,246,.3);border-radius:12px;padding:1.5rem;margin-top:1.5rem;text-align:center}
.build-total h3{margin:0 0 .5rem 0;font-size:1.25rem}
.build-total .total-price{font-size:2.5rem;font-weight:900;color:#10b981}
</style>
</head>
<body>
<nav>
<div class="nav-container">
<div class="logo">PC Parts Tracker</div>
<ul class="nav-links">
<li class="dropdown">
<button class="dropdown-toggle" onclick="toggleDropdown()">Menu</button>
<div class="dropdown-menu">
<button onclick="openPCBuilder(); toggleDropdown()">âœ¨ AI PC Builder</button>
<a href="browse.html" onclick="toggleDropdown()">Browse All Parts</a>
</div>
</li>
</ul>
</div>
</nav>
<section class="hero">
<h1>Find the Best PC Part Deals</h1>
<p>AI-powered deal discovery across eBay, Newegg, and more. Save money on your next build.</p>
<div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap">
<a href="browse.html" class="cta-button">Browse All Parts</a>
<button class="cta-button" onclick="openPCBuilder()" style="background:linear-gradient(135deg,#8b5cf6 0%,#6366f1 100%)">âœ¨ AI PC Builder</button>
</div>
</section>
<div id="pcBuilderModal" class="modal">
<div class="modal-content">
<button class="modal-close" onclick="closePCBuilder()">Ã—</button>
<h2 style="font-size:2rem;margin-bottom:.5rem">AI PC Builder</h2>
<p style="color:var(--text-secondary);margin-bottom:1rem">Let AI find the perfect components for your budget and needs</p>
<div class="builder-form">
<div class="form-group">
<label>What's your budget?</label>
<input type="number" id="budget" placeholder="e.g., 1000" min="300" max="5000"/>
</div>
<div class="form-group">
<label>What will you use it for?</label>
<select id="useCase">
<option value="">Select use case...</option>
<option value="gaming">Gaming</option>
<option value="productivity">Productivity / Work</option>
<option value="content-creation">Content Creation / Video Editing</option>
<option value="budget">Basic Use / Budget Build</option>
<option value="enthusiast">High-End / Enthusiast</option>
</select>
</div>
<div class="form-group">
<label>Performance priority?</label>
<select id="priority">
<option value="">Select priority...</option>
<option value="balanced">Balanced (best value)</option>
<option value="gpu">GPU focused (gaming/rendering)</option>
<option value="cpu">CPU focused (productivity)</option>
<option value="storage">Storage focused (large files)</option>
</select>
</div>
<div class="form-group">
<label>Condition preference?</label>
<select id="conditionPref">
<option value="any">Any condition (best deals)</option>
<option value="new">New only</option>
<option value="new-openbox">New or Open Box</option>
</select>
</div>
<button class="builder-button" onclick="generateBuild()" id="generateBtn">âœ¨ Generate My Build</button>
</div>
<div id="buildResult" class="build-result">
<h3 style="margin:2rem 0 1rem 0">Your Custom Build</h3>
<div id="buildParts"></div>
<div class="build-total">
<h3>Total Build Cost</h3>
<div class="total-price" id="totalPrice">$0.00</div>
<p style="margin:.5rem 0 0 0;color:var(--text-secondary)">Based on current available deals</p>
</div>
</div>
</div>
</div>
<div class="featured-section">
<div class="section-header">
<h2>Featured Deals</h2>
<span class="ai-badge">AI Recommended</span>
</div>
<div id="loading" class="loading">
<div class="spinner"></div>
<p>Finding the best deals...</p>
</div>
<div id="deals" class="deals-grid" style="display:none"></div>
</div>
<script>
// Cloudflare Worker URL
const WORKER_URL = 'https://pc-builder-api.hunterallen3120922.workers.dev';

const FALLBACK_IMG = "data:image/svg+xml;charset=utf-8," + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="750"><rect width="100%" height="100%" fill="#0b1220"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-size="42" fill="#7aa2ff">No Image</text></svg>');

function toggleDropdown() {
    const dropdown = document.querySelector('.dropdown');
    dropdown.classList.toggle('active');
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const dropdown = document.querySelector('.dropdown');
    if (dropdown && !dropdown.contains(event.target)) {
        dropdown.classList.remove('active');
    }
});

function upgradeEbayImg(url) {
    if (!url) return '';
    return String(url).trim().replace(/\/s-l\d+\.(jpg|jpeg|png|webp)$/i, '/s-l1600.$1');
}

function calculateSavings() {
    return Math.round(Math.random() * 30) + 10;
}

function getAIReason() {
    const reasons = [
        'Best price-to-performance ratio in category',
        'Trending deal - price dropped recently',
        'High-value component for budget builds',
        'Popular choice with excellent reviews',
        'Great deal compared to market average'
    ];
    return reasons[Math.floor(Math.random() * reasons.length)];
}

async function loadFeaturedDeals() {
    try {
        const categories = ['gpu', 'cpu', 'motherboard', 'psu', 'case', 'ssd'];
        const allParts = [];
        
        for (const category of categories) {
            try {
                const response = await fetch(`data/${category}.json`, { cache: 'no-store' });
                if (response.ok) {
                    const parts = await response.json();
                    allParts.push(...parts);
                }
            } catch (error) {
                console.warn(`Failed to load ${category}:`, error);
            }
        }
        
        if (allParts.length === 0) {
            document.getElementById('loading').innerHTML = '<p>No deals found. Check back soon!</p>';
            return;
        }
        
        const validParts = allParts.filter(part => {
            if (!part.price || part.price <= 0) return false;
            const title = (part.title || '').toLowerCase();
            if (title.includes('bid') || title.includes('auction')) return false;
            if (title.includes('for parts') || title.includes('broken')) return false;
            return true;
        });
        
        const selectedDeals = heuristicSelection(validParts);
        displayDeals(selectedDeals);
    } catch (error) {
        console.error('Error loading deals:', error);
        document.getElementById('loading').innerHTML = '<p>Error loading deals. Please try again later.</p>';
    }
}

function heuristicSelection(parts) {
    const scored = parts.map(part => {
        let score = 0;
        if (part.condition === 'New') score += 20;
        else if (part.condition === 'Open Box') score += 10;
        if (part.site === 'newegg') score += 15;
        const title = part.title.toLowerCase();
        const brands = ['msi', 'asus', 'corsair', 'samsung'];
        if (brands.some(brand => title.includes(brand))) score += 10;
        return { ...part, score };
    });
    
    scored.sort((a, b) => b.score - a.score);
    
    const selected = [];
    const categoriesUsed = new Set();
    
    for (const part of scored) {
        if (!categoriesUsed.has(part.partType) && selected.length < 6) {
            selected.push(part);
            categoriesUsed.add(part.partType);
        }
    }
    
    for (const part of scored) {
        if (selected.length >= 6) break;
        if (!selected.includes(part)) {
            selected.push(part);
        }
    }
    
    return selected.slice(0, 6);
}

function displayDeals(deals) {
    const dealsContainer = document.getElementById('deals');
    const loadingContainer = document.getElementById('loading');
    
    dealsContainer.innerHTML = '';
    
    deals.forEach(deal => {
        const card = document.createElement('div');
        card.className = 'deal-card';
        
        const savings = calculateSavings();
        const imgUrl = upgradeEbayImg(deal.image_url) || FALLBACK_IMG;
        
        card.innerHTML = `
            <div class="deal-badge">-${savings}%</div>
            <img src="${imgUrl}" alt="${deal.title}" class="deal-image" onerror="this.src='${FALLBACK_IMG}'" loading="lazy">
            <div class="deal-content">
                <h3 class="deal-title">${deal.title || deal.name}</h3>
                <div class="deal-meta">
                    <span class="deal-tag">${deal.partType}</span>
                    <span class="deal-tag">${deal.site}</span>
                    <span class="deal-tag">${deal.condition}</span>
                </div>
                <div class="deal-price">$${deal.price.toFixed(2)}</div>
                <p class="deal-reason">${getAIReason()}</p>
                <a href="${deal.url}" target="_blank" rel="noopener noreferrer" class="deal-button">View Deal â†’</a>
            </div>
        `;
        
        dealsContainer.appendChild(card);
    });
    
    loadingContainer.style.display = 'none';
    dealsContainer.style.display = 'grid';
}

function openPCBuilder() {
    document.getElementById('pcBuilderModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closePCBuilder() {
    document.getElementById('pcBuilderModal').classList.remove('active');
    document.body.style.overflow = 'auto';
}

async function generateBuild() {
    const budget = parseFloat(document.getElementById('budget').value);
    const useCase = document.getElementById('useCase').value;
    const priority = document.getElementById('priority').value;
    const conditionPref = document.getElementById('conditionPref').value;
    
    if (!budget || !useCase || !priority) {
        alert('Please fill in all required fields');
        return;
    }
    
    const generateBtn = document.getElementById('generateBtn');
    generateBtn.disabled = true;
    generateBtn.textContent = 'ðŸ¤– AI is building your PC...';
    
    try {
        // Load all parts data
        const categories = ['gpu', 'cpu', 'motherboard', 'psu', 'case', 'ssd'];
        const partsForAI = {};
        const allParts = {};
        
        for (const category of categories) {
            try {
                const response = await fetch(`data/${category}.json`, { cache: 'no-store' });
                if (response.ok) {
                    const parts = await response.json();
                    let validParts = parts.filter(p => p.price && p.price > 0);
                    
                    // Filter by condition preference
                    if (conditionPref === 'new') {
                        validParts = validParts.filter(p => p.condition === 'New');
                    } else if (conditionPref === 'new-openbox') {
                        validParts = validParts.filter(p => p.condition === 'New' || p.condition === 'Open Box');
                    }
                    
                    allParts[category] = validParts.sort((a, b) => a.price - b.price);
                    partsForAI[category] = allParts[category].slice(0, 30).map(p => ({
                        title: p.title,
                        price: p.price,
                        condition: p.condition,
                        site: p.site
                    }));
                }
            } catch (error) {
                console.warn(`Failed to load ${category}:`, error);
                partsForAI[category] = [];
                allParts[category] = [];
            }
        }
        
        // Call Cloudflare Worker
        const response = await fetch(WORKER_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                budget: budget,
                useCase: useCase,
                priority: priority,
                conditionPref: conditionPref,
                parts: partsForAI
            })
        });
        
        if (!response.ok) {
            const errorData = await response.json();
            console.error('Worker error details:', errorData);
            alert('Worker Error: ' + (errorData.error || 'Unknown error') + '\n\nDetails: ' + JSON.stringify(errorData.details || ''));
            throw new Error('Worker request failed: ' + (errorData.error || 'Unknown'));
        }
        
        const result = await response.json();
        
        if (!result.success || !result.build) {
            throw new Error(result.error || 'Invalid response');
        }
        
        // Map indices to actual parts
        const finalBuild = {};
        for (const [partType, index] of Object.entries(result.build)) {
            if (partType !== 'reasoning') {
                finalBuild[partType] = allParts[partType][index];
            }
        }
        
        displayBuild(finalBuild);
        
    } catch (error) {
        console.error('Build error:', error);
        alert('AI builder unavailable. Using smart fallback...');
        
        // Fallback to local algorithm
        try {
            const categories = ['gpu', 'cpu', 'motherboard', 'psu', 'case', 'ssd'];
            const allParts = {};
            
            for (const category of categories) {
                const response = await fetch(`data/${category}.json`, { cache: 'no-store' });
                if (response.ok) {
                    allParts[category] = await response.json();
                }
            }
            
            const build = smartBuildPC(budget, useCase, priority, allParts, conditionPref);
            if (build) {
                displayBuild(build);
            } else {
                alert('Could not find compatible parts within budget.');
            }
        } catch (fallbackError) {
            alert('Both AI and fallback failed. Please try again.');
        }
    } finally {
        generateBtn.disabled = false;
        generateBtn.textContent = 'âœ¨ Generate My Build';
    }
}

function smartBuildPC(budget, useCase, priority, allParts, conditionPref) {
    const budgetAllocation = {
        gaming: { gpu: 0.35, cpu: 0.20, motherboard: 0.15, psu: 0.10, case: 0.08, ssd: 0.12 },
        productivity: { gpu: 0.15, cpu: 0.30, motherboard: 0.18, psu: 0.12, case: 0.10, ssd: 0.15 },
        'content-creation': { gpu: 0.30, cpu: 0.25, motherboard: 0.15, psu: 0.12, case: 0.08, ssd: 0.10 },
        budget: { gpu: 0.25, cpu: 0.20, motherboard: 0.15, psu: 0.12, case: 0.10, ssd: 0.18 },
        enthusiast: { gpu: 0.40, cpu: 0.25, motherboard: 0.12, psu: 0.10, case: 0.06, ssd: 0.07 }
    };
    
    let allocation = { ...budgetAllocation[useCase] };
    
    if (priority === 'gpu') {
        allocation.gpu += 0.10;
        allocation.cpu -= 0.05;
        allocation.motherboard -= 0.05;
    } else if (priority === 'cpu') {
        allocation.cpu += 0.10;
        allocation.gpu -= 0.05;
        allocation.ssd -= 0.05;
    }
    
    const targetPrices = Object.fromEntries(
        Object.keys(allocation).map(part => [part, budget * allocation[part]])
    );
    
    const findBestPart = (parts, targetPrice, flexibility) => {
        if (!parts?.length) return null;
        
        let validParts = parts.filter(p => p.price > 0);
        
        if (conditionPref === 'new') {
            validParts = validParts.filter(p => p.condition === 'New');
        } else if (conditionPref === 'new-openbox') {
            validParts = validParts.filter(p => p.condition === 'New' || p.condition === 'Open Box');
        }
        
        const sorted = validParts.sort((a, b) => a.price - b.price);
        const inRange = sorted.filter(p => 
            p.price >= targetPrice * (1 - flexibility) && 
            p.price <= targetPrice * (1 + flexibility)
        );
        
        if (inRange.length > 0) {
            return inRange[Math.floor(inRange.length / 2)];
        }
        
        return sorted[0];
    };
    
    const gpu = findBestPart(allParts.gpu, targetPrices.gpu, 0.3);
    const cpu = findBestPart(allParts.cpu, targetPrices.cpu, 0.3);
    
    if (!gpu || !cpu) return null;
    
    const cpuName = cpu.title.toLowerCase();
    const compatibleMotherboards = (allParts.motherboard?.filter(mb => {
        const title = mb.title.toLowerCase();
        if (cpuName.includes('ryzen') || cpuName.includes('amd')) {
            return title.includes('am4') || title.includes('am5') || title.includes('amd');
        } else {
            return title.includes('lga') || title.includes('intel');
        }
    }) || []);
    
    const motherboard = findBestPart(compatibleMotherboards, targetPrices.motherboard, 0.4);
    const psu = findBestPart(allParts.psu, targetPrices.psu, 0.3);
    const pcCase = findBestPart(allParts.case, targetPrices.case, 0.4);
    const ssd = findBestPart(allParts.ssd, targetPrices.ssd, 0.3);
    
    if (!motherboard || !psu || !pcCase || !ssd) return null;
    
    return { gpu, cpu, motherboard, psu, case: pcCase, ssd };
}

function displayBuild(build) {
    const partsContainer = document.getElementById('buildParts');
    const resultContainer = document.getElementById('buildResult');
    
    partsContainer.innerHTML = '';
    let totalCost = 0;
    
    const partNames = {
        gpu: 'Graphics Card',
        cpu: 'Processor',
        motherboard: 'Motherboard',
        psu: 'Power Supply',
        case: 'Case',
        ssd: 'Storage'
    };
    
    for (const [partType, part] of Object.entries(build)) {
        if (!part) continue;
        
        totalCost += part.price;
        
        const partDiv = document.createElement('div');
        partDiv.className = 'build-part';
        partDiv.innerHTML = `
            <div class="build-part-info">
                <h4>${partNames[partType]}</h4>
                <p>${part.title}</p>
                <p style="margin-top:.25rem"><strong>${part.condition}</strong> â€¢ ${part.site}</p>
            </div>
            <div>
                <div class="build-part-price">$${part.price.toFixed(2)}</div>
                <a href="${part.url}" target="_blank" rel="noopener" style="font-size:.75rem;color:var(--accent);text-decoration:none">View Deal â†’</a>
            </div>
        `;
        
        partsContainer.appendChild(partDiv);
    }
    
    document.getElementById('totalPrice').textContent = `$${totalCost.toFixed(2)}`;
    resultContainer.classList.add('active');
    resultContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Load deals on page load
loadFeaturedDeals();
</script>
</body>
</html>
